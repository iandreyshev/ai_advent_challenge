# üî• –î–µ–Ω—å 17 ‚Äî Retrieval-Augmented Generation (RAG) –ø–æ–≤–µ—Ä—Ö –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∏–Ω–¥–µ–∫—Å–∞

–ü—Ä–æ–µ–∫—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω –≤ —Ä–∞–º–∫–∞—Ö –∫—É—Ä—Å–∞ –ø–æ –Ω–µ–π—Ä–æ—Å–µ—Ç—è–º (Day 17) –∏ —è–≤–ª—è–µ—Ç—Å—è –ª–æ–≥–∏—á–µ—Å–∫–∏–º –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ–º **–î–Ω—è 16**.

–ù–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ –∫ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É –ª–æ–∫–∞–ª—å–Ω–æ–º—É –∏–Ω–¥–µ–∫—Å—É —Å —ç–º–±–µ–¥–¥–∏–Ω–≥–∞–º–∏ –¥–æ–±–∞–≤–ª–µ–Ω **RAG-–∞–≥–µ–Ω—Ç**, –∫–æ—Ç–æ—Ä—ã–π:
- –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤–æ–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è,
- –∏—â–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –ø–æ —ç–º–±–µ–¥–¥–∏–Ω–≥–∞–º,
- —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç,
- –ø–µ—Ä–µ–¥–∞—ë—Ç –µ–≥–æ –≤ LLM –∏
- –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Å–º—ã—Å–ª–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç —Å —É—á—ë—Ç–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.

---

## üß† –û–±—â–∞—è –∏–¥–µ—è

**Retrieval-Augmented Generation (RAG)** ‚Äî —ç—Ç–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, –≤ –∫–æ—Ç–æ—Ä–æ–π:
1. –ú–æ–¥–µ–ª—å –Ω–µ ¬´–∑–Ω–∞–µ—Ç –≤—Å—ë –∑–∞—Ä–∞–Ω–µ–µ¬ª
2. –û–Ω–∞ –∏—â–µ—Ç –Ω—É–∂–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö
3. –ò —Ç–æ–ª—å–∫–æ –ø–æ—Ç–æ–º –æ—Ç–≤–µ—á–∞–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É—è –Ω–∞–π–¥–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç

–í –Ω–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ:
- –ø–æ–∏—Å–∫ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è **–ª–æ–∫–∞–ª—å–Ω–æ**
- —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ —Å—á–∏—Ç–∞—é—Ç—Å—è **—á–µ—Ä–µ–∑ Ollama**
- LLM —Ç–∞–∫–∂–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è **–ª–æ–∫–∞–ª—å–Ω–æ**
- –Ω–∏–∫–∞–∫–∏—Ö API-–∫–ª—é—á–µ–π –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ data/                ‚Äî –¥–æ–∫—É–º–µ–Ω—Ç—ã –¥–ª—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ (–∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è git)
‚îú‚îÄ build_index.py       ‚Äî –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –∏–Ω–¥–µ–∫—Å–∞
‚îú‚îÄ rag_agent.py         ‚Äî RAG-–∞–≥–µ–Ω—Ç (–ø–æ–∏—Å–∫ + –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞)
‚îú‚îÄ index.jsonl          ‚Äî –∏–Ω–¥–µ–∫—Å —Å —ç–º–±–µ–¥–¥–∏–Ω–≥–∞–º–∏ (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è)
‚îú‚îÄ meta.json            ‚Äî –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∏–Ω–¥–µ–∫—Å–∞ (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è)
‚îú‚îÄ .gitignore
‚îî‚îÄ README.md
```

---

## üß© –î–µ–Ω—å 16 ‚Üí –î–µ–Ω—å 17: —á—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

### –î–µ–Ω—å 16
- –∑–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- —Ä–∞–∑–±–∏–µ–Ω–∏–µ –Ω–∞ —á–∞–Ω–∫–∏
- –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
- —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∏–Ω–¥–µ–∫—Å–∞

### –î–µ–Ω—å 17
- –∑–∞–≥—Ä—É–∑–∫–∞ –∏–Ω–¥–µ–∫—Å–∞
- —ç–º–±–µ–¥–¥–∏–Ω–≥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
- –ø–æ–∏—Å–∫ top-K —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —á–∞–Ω–∫–æ–≤
- –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ cosine similarity
- —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ RAG-–ø—Ä–æ–º–ø—Ç–∞
- –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ —á–µ—Ä–µ–∑ LLM

---

## üìÑ build_index.py ‚Äî –∏–Ω–¥–µ–∫—Å–∞—Ç–æ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

–°–∫—Ä–∏–ø—Ç **build_index.py** –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ—Ö—Ä–∞–Ω—ë–Ω –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π.

–û–Ω:
- —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ —á–∏—Ç–∞–µ—Ç —Ñ–∞–π–ª—ã –∏–∑ `data/`
- —Ä–∞–∑–±–∏–≤–∞–µ—Ç —Ç–µ–∫—Å—Ç –Ω–∞ —á–∞–Ω–∫–∏ —Å overlap
- –ø–æ–ª—É—á–∞–µ—Ç —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ —á–µ—Ä–µ–∑ Ollama
- —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏–Ω–¥–µ–∫—Å –≤ `index.jsonl`
- –ø–∏—à–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤ `meta.json`

üìå –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ ‚Äî —Å–º. README –î–Ω—è 16.

---

## ü§ñ rag_agent.py ‚Äî RAG-–∞–≥–µ–Ω—Ç

–§–∞–π–ª `rag_agent.py` —Ä–µ–∞–ª–∏–∑—É–µ—Ç –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π RAG-–ø–∞–π–ø–ª–∞–π–Ω.

### –û—Å–Ω–æ–≤–Ω—ã–µ —ç—Ç–∞–ø—ã —Ä–∞–±–æ—Ç—ã

1. **–ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω–¥–µ–∫—Å–∞**
   - –ø–æ—Å—Ç—Ä–æ—á–Ω–æ —á–∏—Ç–∞–µ—Ç `index.jsonl`
   - –∑–∞–≥—Ä—É–∂–∞–µ—Ç —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ –∏ —Ç–µ–∫—Å—Ç—ã —á–∞–Ω–∫–æ–≤

2. **–≠–º–±–µ–¥–¥–∏–Ω–≥ –∑–∞–ø—Ä–æ—Å–∞**
   - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –≤–æ–ø—Ä–æ—Å –∫–æ–¥–∏—Ä—É–µ—Ç—Å—è —Ç–æ–π –∂–µ embedding-–º–æ–¥–µ–ª—å—é
   - —ç—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —Å–æ–ø–æ—Å—Ç–∞–≤–∏–º–æ—Å—Ç—å –≤–µ–∫—Ç–æ—Ä–æ–≤

3. **–ü–æ–∏—Å–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —á–∞–Ω–∫–æ–≤**
   - –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —á–∞–Ω–∫–∞ —Å—á–∏—Ç–∞–µ—Ç—Å—è cosine similarity
   - –≤—ã–±–∏—Ä–∞—é—Ç—Å—è top-K –Ω–∞–∏–±–æ–ª–µ–µ –±–ª–∏–∑–∫–∏—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤

4. **–°–±–æ—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞**
   - —Ç–µ–∫—Å—Ç—ã –ª—É—á—à–∏—Ö —á–∞–Ω–∫–æ–≤ –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è
   - —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π, –Ω–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç

5. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞**
   - –∫–æ–Ω—Ç–µ–∫—Å—Ç + –≤–æ–ø—Ä–æ—Å –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ LLM
   - –º–æ–¥–µ–ª—å –æ—Ç–≤–µ—á–∞–µ—Ç, –æ–ø–∏—Ä–∞—è—Å—å –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç—ã

---

## üìê Cosine Similarity

–î–ª—è –ø–æ–∏—Å–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **–∫–æ—Å–∏–Ω—É—Å–Ω–æ–µ —Å—Ö–æ–¥—Å—Ç–≤–æ**:

- 1.0 ‚Äî –≤–µ–∫—Ç–æ—Ä—ã –∏–¥–µ–Ω—Ç–∏—á–Ω—ã
- 0.0 ‚Äî –æ—Ä—Ç–æ–≥–æ–Ω–∞–ª—å–Ω—ã
- -1.0 ‚Äî –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã

–≠—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ –≤ RAG-—Å–∏—Å—Ç–µ–º–∞—Ö.

---

## üß† RAG-–ø—Ä–æ–º–ø—Ç (—É–ø—Ä–æ—â—ë–Ω–Ω–æ)

```
–¢—ã ‚Äî –ø–æ–º–æ—â–Ω–∏–∫, –æ—Ç–≤–µ—á–∞—é—â–∏–π –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º.

–ö–æ–Ω—Ç–µ–∫—Å—Ç:
<—Ç–æ–ø-K —á–∞–Ω–∫–æ–≤>

–í–æ–ø—Ä–æ—Å:
<–≤–æ–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è>

–û—Ç–≤–µ—Ç—å –∫—Ä–∞—Ç–∫–æ –∏ –ø–æ —Å—É—â–µ—Å—Ç–≤—É, –æ–ø–∏—Ä–∞—è—Å—å –Ω–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç.
```

LLM **–Ω–µ –¥–æ–ª–∂–Ω–∞ –≤—ã–¥—É–º—ã–≤–∞—Ç—å**, –∞ –æ–ø–∏—Ä–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç.

---

## ‚öôÔ∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.10+
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–∞—è Ollama
- –ú–æ–¥–µ–ª–∏:
  - `nomic-embed-text` ‚Äî —ç–º–±–µ–¥–¥–∏–Ω–≥–∏
  - –ª—é–±–∞—è LLM (–Ω–∞–ø—Ä–∏–º–µ—Ä `qwen2.5`, `llama3`, `mistral`)

---

## ü¶ô –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–æ–¥–µ–ª–µ–π Ollama

```bash
ollama pull nomic-embed-text
ollama pull qwen2.5
```

–ü—Ä–æ–≤–µ—Ä–∫–∞:
```bash
ollama list
```

---

## ‚ñ∂Ô∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. –ü–æ—Å—Ç—Ä–æ–∏—Ç—å –∏–Ω–¥–µ–∫—Å (–æ–¥–∏–Ω —Ä–∞–∑)

```bash
python3 build_index.py
```

---

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å RAG-–∞–≥–µ–Ω—Ç

```bash
python3 rag_agent.py
```

–ò–ª–∏ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:

```bash
python3 rag_agent.py \
  --index index.jsonl \
  --top-k 5 \
  --embed-model nomic-embed-text \
  --llm-model qwen2.5
```

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
- `--index`        –ø—É—Ç—å –∫ –∏–Ω–¥–µ–∫—Å—É
- `--top-k`        –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞–Ω–∫–æ–≤ –¥–ª—è RAG
- `--embed-model` embedding-–º–æ–¥–µ–ª—å
- `--llm-model`   LLM –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞

---

## üß™ –ß—Ç–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å –¥–∞–ª—å—à–µ

- —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —á–∞–Ω–∫–æ–≤ –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫—É
- –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- reranking
- streaming-–æ—Ç–≤–µ—Ç—ã
- citations / —Å—Å—ã–ª–∫–∏ –Ω–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∏
- web-ui –∏–ª–∏ CLI-—á–∞—Ç

---

## ‚úÖ –ò—Ç–æ–≥

–ù–∞ **–î–µ–Ω—å 17** —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π **–ª–æ–∫–∞–ª—å–Ω—ã–π RAG**:

- üìö —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã  
- üß† —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫  
- ü§ñ LLM-–æ—Ç–≤–µ—Ç—ã —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º  
- üîí –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ñ–ª–∞–π–Ω  

–≠—Ç–æ —É–∂–µ –æ—Å–Ω–æ–≤–∞ –¥–ª—è:
- AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ —á–∞—Ç-–±–æ—Ç–∞
- –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–π –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π
