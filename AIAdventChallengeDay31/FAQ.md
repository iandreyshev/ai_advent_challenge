# FAQ –∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

## üîß –ü—Ä–æ–±–ª–µ–º—ã —Å —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π

### ‚ùå "No module named 'speech_recognition'"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
pip install SpeechRecognition
```

### ‚ùå "No module named '_portaudio'"

PyAudio –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ.

**macOS:**
```bash
brew install portaudio
pip install pyaudio
```

**Linux:**
```bash
sudo apt-get install portaudio19-dev python3-pyaudio
pip install pyaudio
```

**Windows:**
```bash
pip install pipwin
pipwin install pyaudio
```

### ‚ùå "Could not find PyAudio"

–ï—Å–ª–∏ pip install –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤:

**macOS/Linux:**
```bash
pip install --upgrade setuptools
pip install pyaudio --no-cache-dir
```

## üé§ –ü—Ä–æ–±–ª–µ–º—ã —Å –º–∏–∫—Ä–æ—Ñ–æ–Ω–æ–º

### ‚ùå "No Default Input Device Available"

–ú–∏–∫—Ä–æ—Ñ–æ–Ω –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω —Å–∏—Å—Ç–µ–º–æ–π.

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
# –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–∏–∫—Ä–æ—Ñ–æ–Ω–æ–≤
python3 test_microphone.py
```

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –º–∏–∫—Ä–æ—Ñ–æ–Ω
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã (–ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ó–≤—É–∫ ‚Üí –í—Ö–æ–¥)
3. –î–∞–π—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –Ω–∞ –¥–æ—Å—Ç—É–ø –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É (macOS: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å ‚Üí –ú–∏–∫—Ä–æ—Ñ–æ–Ω)

### ‚ùå –ú–∏–∫—Ä–æ—Ñ–æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
1. –°–ª–∏—à–∫–æ–º —Ç–∏—Ö–∏–π –≥–æ–ª–æ—Å
2. –§–æ–Ω–æ–≤—ã–π —à—É–º
3. –ù–∏–∑–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞

**–†–µ—à–µ–Ω–∏–µ:**
1. –ì–æ–≤–æ—Ä–∏—Ç–µ –≥—Ä–æ–º—á–µ –∏ —á—ë—Ç—á–µ
2. –£–º–µ–Ω—å—à–∏—Ç–µ —Ñ–æ–Ω–æ–≤—ã–π —à—É–º
3. –ü–æ–¥–≤–∏–Ω—å—Ç–µ –º–∏–∫—Ä–æ—Ñ–æ–Ω –±–ª–∏–∂–µ
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:

```python
# –í –∫–æ–¥–µ voice_agent.py –∏–∑–º–µ–Ω–∏—Ç–µ:
self.recognizer.energy_threshold = 300  # –ú–µ–Ω—å—à–µ –∑–Ω–∞—á–µ–Ω–∏–µ = –≤—ã—à–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
```

### ‚ùå "Recognition connection failed"

–ù–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É (–¥–ª—è Google Speech Recognition).

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ñ–ª–∞–π–Ω-–¥–≤–∏–∂–æ–∫:

```bash
pip install pocketsphinx
python3 voice_agent.py --engine sphinx
```

## ü§ñ –ü—Ä–æ–±–ª–µ–º—ã —Å LLM

### ‚ùå "Connection refused" / "Could not connect to Ollama"

Ollama –Ω–µ –∑–∞–ø—É—â–µ–Ω.

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ Ollama
ollama serve

# –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –º–æ–¥–µ–ª—å
ollama pull qwen2.5
```

### ‚ùå "Model not found"

–ú–æ–¥–µ–ª—å –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –≤ Ollama.

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –º–æ–¥–µ–ª–∏
ollama list

# –ó–∞–≥—Ä—É–∑–∏—Ç–µ –Ω—É–∂–Ω—É—é –º–æ–¥–µ–ª—å
ollama pull qwen2.5
```

### ‚ùå –û—Ç–≤–µ—Ç—ã –Ω–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —è–∑—ã–∫–µ

LLM –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–µ –Ω–∞ —Ç–æ–º —è–∑—ã–∫–µ, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –∑–∞–¥–∞–Ω –≤–æ–ø—Ä–æ—Å.

**–†–µ—à–µ–Ω–∏–µ:**
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–æ–¥–µ–ª—å —Å —Ö–æ—Ä–æ—à–µ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞ (qwen2.5, llama3.2)
2. –î–æ–±–∞–≤—å—Ç–µ —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –≤ –∫–æ–¥:

```python
payload = {
    "model": self.model,
    "prompt": f"–û—Ç–≤–µ—Ç—å –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ: {text}",
    "stream": False
}
```

## üåê –ü—Ä–æ–±–ª–µ–º—ã —Å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ–º

### ‚ùå –ü–ª–æ—Ö–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —è–∑—ã–∫ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ:
```bash
python3 voice_agent.py --language ru-RU
```

2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –¥–≤–∏–∂–∫–∏:
```bash
# Whisper API (—Ç—Ä–µ–±—É–µ—Ç OpenAI API –∫–ª—é—á)
export OPENAI_API_KEY=sk-...
python3 voice_agent.py --engine whisper
```

### ‚ùå "WaitTimeoutError"

–¢–∞–π–º–∞—É—Ç –æ–∂–∏–¥–∞–Ω–∏—è —Ä–µ—á–∏.

**–†–µ—à–µ–Ω–∏–µ:**
1. –ù–∞—á–∏–Ω–∞–π—Ç–µ –≥–æ–≤–æ—Ä–∏—Ç—å –±—ã—Å—Ç—Ä–µ–µ –ø–æ—Å–ª–µ —Å–æ–æ–±—â–µ–Ω–∏—è "–ì–æ–≤–æ—Ä–∏—Ç–µ..."
2. –£–≤–µ–ª–∏—á—å—Ç–µ —Ç–∞–π–º–∞—É—Ç –≤ –∫–æ–¥–µ:

```python
audio = self.recognizer.listen(source, timeout=10)  # –ë—ã–ª–æ 5
```

### ‚ùå "UnknownValueError"

–†–µ—á—å –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–∞.

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
1. –°–ª–∏—à–∫–æ–º —Ç–∏—Ö–æ
2. –ù–µ—á—ë—Ç–∫–∞—è —Ä–µ—á—å
3. –°–∏–ª—å–Ω—ã–π –∞–∫—Ü–µ–Ω—Ç
4. –§–æ–Ω–æ–≤—ã–π —à—É–º

**–†–µ—à–µ–Ω–∏–µ:**
- –ì–æ–≤–æ—Ä–∏—Ç–µ —á—ë—Ç–∫–æ –∏ –≥—Ä–æ–º–∫–æ
- –£–º–µ–Ω—å—à–∏—Ç–µ —Ñ–æ–Ω–æ–≤—ã–π —à—É–º
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –º–∏–∫—Ä–æ—Ñ–æ–Ω

## ‚öôÔ∏è –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### üêå –ú–µ–¥–ª–µ–Ω–Ω–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ

**–†–µ—à–µ–Ω–∏–µ:**
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–π –¥–≤–∏–∂–æ–∫ (Sphinx)
2. –£–º–µ–Ω—å—à–∏—Ç–µ `phrase_time_limit`:

```python
audio = self.recognizer.listen(source, phrase_time_limit=5)  # –ë—ã–ª–æ 10
```

### üêå –ú–µ–¥–ª–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç LLM

**–†–µ—à–µ–Ω–∏–µ:**
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–æ–ª–µ–µ –±—ã—Å—Ç—Ä—É—é –º–æ–¥–µ–ª—å:
```bash
ollama pull qwen2.5:1.5b  # –ú–µ–Ω—å—à–∞—è –≤–µ—Ä—Å–∏—è
python3 voice_agent.py --model qwen2.5:1.5b
```

2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É–¥–∞–ª—ë–Ω–Ω—ã–π –º–æ—â–Ω—ã–π —Å–µ—Ä–≤–µ—Ä:
```bash
python3 voice_agent.py --host 192.168.1.100
```

## üí° –°–æ–≤–µ—Ç—ã –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### ‚úÖ –î–ª—è –ª—É—á—à–µ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è:

1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –º–∏–∫—Ä–æ—Ñ–æ–Ω
2. –ì–æ–≤–æ—Ä–∏—Ç–µ –≤ —Ç–∏—Ö–æ–º –ø–æ–º–µ—â–µ–Ω–∏–∏
3. –ì–æ–≤–æ—Ä–∏—Ç–µ —á—ë—Ç–∫–æ –∏ —Å –Ω–æ—Ä–º–∞–ª—å–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç—å—é
4. –î–µ—Ä–∂–∏—Ç–µ –º–∏–∫—Ä–æ—Ñ–æ–Ω –Ω–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–∏ 10-15 —Å–º –æ—Ç —Ä—Ç–∞
5. –ò–∑–±–µ–≥–∞–π—Ç–µ —Ä–µ–∑–∫–∏—Ö –∑–≤—É–∫–æ–≤ –∏ –¥–≤–∏–∂–µ–Ω–∏–π

### ‚úÖ –î–ª—è –ª—É—á—à–∏—Ö –æ—Ç–≤–µ—Ç–æ–≤ LLM:

1. –§–æ—Ä–º—É–ª–∏—Ä—É–π—Ç–µ –≤–æ–ø—Ä–æ—Å—ã —á—ë—Ç–∫–æ –∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ
2. –ò–∑–±–µ–≥–∞–π—Ç–µ —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–æ–¥–µ–ª–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≤–∞—à–µ–≥–æ —è–∑—ã–∫–∞
4. –î–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–¥–∞—á –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–æ–ª–µ–µ –º–æ—â–Ω—ã–µ –º–æ–¥–µ–ª–∏

### ‚úÖ –î–ª—è –æ—Ç–ª–∞–¥–∫–∏:

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞: `make test-mic`
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç –±–µ–∑ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞: `make test`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Ollama: `ollama logs`
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–µ–º–æ-—Ä–µ–∂–∏–º: `make demo`

## üìû –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–º–æ—â–∏

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–µ–Ω–∞:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏–∏ –ø–∞–∫–µ—Ç–æ–≤:
```bash
pip list | grep -i "speech\|pyaudio\|requests"
```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Python –≤–µ—Ä—Å–∏—é:
```bash
python3 --version  # –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å 3.8+
```

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏—Å—Ç–µ–º—É:
```bash
uname -a  # Linux/macOS
systeminfo  # Windows
```

4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø–æ–ª–Ω—É—é –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É:
```bash
make test-mic
make test
```
