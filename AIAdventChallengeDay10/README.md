# День 10: Сжатие диалога + Персистентность

iOS-приложение со сжатием истории и сохранением состояния между сессиями.

## Возможности

- Всё из Дня 9 (сжатие диалога)
- Сохранение состояния на диск
- Восстановление при запуске приложения
- Автосохранение при уходе в фон

## Технологии

- **SwiftUI** — пользовательский интерфейс
- **Yandex Cloud GenerativeAI API**
- **FileManager** — работа с файловой системой
- **Codable** — сериализация состояния

## Персистентность

Сохраняется:
- История сообщений
- Текущее summary (если есть)
- Счётчики токенов
- Настройки режима сжатия

## Структура

```
AIAdventChallengeDay10/
├── ContentView.swift      # Основной UI
├── ChatPersistence.swift  # Работа с файлами
├── Secrets.swift          # API ключи (gitignored)
└── Assets/
```

## Запуск

1. Добавьте Yandex API ключи в `Secrets.swift`
2. Откройте в Xcode и запустите

## Особенности

- `@Environment(\.scenePhase)` для отслеживания состояния приложения
- Сохранение при `.inactive` и `.background`
- Загрузка состояния в `.task` модификаторе
- Структура `PersistedAppState` для сериализации
