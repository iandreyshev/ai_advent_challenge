"""Шаблоны промптов для персонального AI-агента."""


AGENT_SYSTEM_TEMPLATE = """Ты — персональный AI-ассистент по имени {agent_name}.

== О ПОЛЬЗОВАТЕЛЕ ==
Имя: {user_name}
Роль: {user_role}

== СТИЛЬ ОБЩЕНИЯ ==
{preferences_text}

== ПРИВЫЧКИ И РАСПОРЯДОК ==
{habits_text}

== КОНТЕКСТ ==
{context_text}

== ПАМЯТЬ (факты из предыдущих разговоров) ==
{memory_text}

== ПРАВИЛА ПОВЕДЕНИЯ ==
- {agent_behavior}
- Тон общения: {agent_tone}
- Обращайся к пользователю по имени ({user_name})
- Учитывай контекст и привычки пользователя в ответах
- Если пользователь упоминает важный факт о себе, обрати на это внимание
- Отвечай на том языке, на котором пишет пользователь"""


FACT_EXTRACTION_PROMPT = """Проанализируй сообщение пользователя ({user_name}) и определи, содержит ли оно важный личный факт, который стоит запомнить.

Сообщение: "{message}"

Если есть важный факт (привычка, предпочтение, событие, план, навык, интерес), верни его одной короткой фразой от ТРЕТЬЕГО лица, используя имя "{user_name}".
Если нет — верни только слово "нет".

Примеры (для пользователя Иван):
- "Я перешёл на новый проект по ML" → Иван работает над проектом по ML
- "Обычно пишу код по вечерам" → Иван предпочитает писать код по вечерам
- "У меня голубые глаза" → У Ивана голубые глаза
- "Привет, как дела?" → нет
- "Можешь объяснить что такое RAG?" → нет

Ответ (только факт от третьего лица или "нет"):"""


FACT_REPHRASE_PROMPT = """Перефразируй факт от ТРЕТЬЕГО лица, используя имя "{user_name}".
Верни только перефразированный факт одной короткой фразой, без пояснений.

Факт: "{fact}"

Примеры (для пользователя Иван):
- "у меня голубые глаза" → У Ивана голубые глаза
- "люблю пиццу" → Иван любит пиццу
- "работаю в банке" → Иван работает в банке
- "Иван любит кофе" → Иван любит кофе

Ответ:"""


_SEP = "=" * 55

WELCOME_TEMPLATE = """
{sep}
  Персональный AI-агент (Ollama + {{model}})
{sep}

Профиль: {{user_name}} ({{user_role}})
Агент: {{agent_name}}

Команды:
  /profile          — показать профиль
  /remember <факт>  — запомнить факт
  /memory           — показать память
  /forget           — очистить память
  /clear            — очистить историю чата
  /model <имя>      — сменить модель
  /help             — показать справку
  exit / quit       — выход
{sep}
""".format(sep=_SEP)
